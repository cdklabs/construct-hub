# ~~ Generated by projen. To modify, edit .projenrc.ts and run "npx projen".

name: update-vpc-acl-allow-lists
on:
  schedule:
    - cron: 37 13 * * *
jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      actions: write
      contents: write
      pull-requests: write
    steps:
      - name: Check Out
        uses: actions/checkout@v2
      - name: Update CloudFlare IP lists
        run: |-
          curl -SsL "https://www.cloudflare.com/ips-v4" \
               -o resources/vpc-allow-lists/cloudflare-IPv4.txt
      - name: Setup Node
        uses: actions/setup-node@v2
      - name: Update GitHub IP lists
        run: node ./update-github-ip-allowlist.js
      - name: Make Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.PROJEN_GITHUB_TOKEN }}
          branch: automation/update-vpc-acl-allow-lists
          commit-message: |-
            chore: upgrade network ACL allow-lists

            Updated the network ACL allow-lists from authoritative sources.
          title: "chore: upgrade network ACL allow-lists"
          body: Updated the network ACL allow-lists from authoritative sources.
          labels: auto-approve
          author: github-actions <github-actions@github.com>
          committer: github-actions <github-actions@github.com>
          signoff: true
