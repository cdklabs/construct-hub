// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`golden snapshot 1`] = `
Resources:
  ConstructHubDummyhandlerServiceRoleBDB01E7B:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
  ConstructHubDummyhandlerC748A7D7:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aS3Bucket9AF898BC
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aS3VersionKeyFA101353
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aS3VersionKeyFA101353
      Role:
        Fn::GetAtt:
          - ConstructHubDummyhandlerServiceRoleBDB01E7B
          - Arn
      Environment:
        Variables:
          AWS_NODEJS_CONNECTION_REUSE_ENABLED: "1"
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - ConstructHubDummyhandlerServiceRoleBDB01E7B
  ConstructHubWebAppWebsiteBucket4B2B9DB2:
    Type: AWS::S3::Bucket
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
  ConstructHubWebAppWebsiteBucketPolicy17174C06:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket:
        Ref: ConstructHubWebAppWebsiteBucket4B2B9DB2
      PolicyDocument:
        Statement:
          - Action: s3:GetObject
            Effect: Allow
            Principal:
              CanonicalUser:
                Fn::GetAtt:
                  - ConstructHubWebAppDistributionOrigin1S3Origin694AF937
                  - S3CanonicalUserId
            Resource:
              Fn::Join:
                - ""
                - - Fn::GetAtt:
                      - ConstructHubWebAppWebsiteBucket4B2B9DB2
                      - Arn
                  - /*
        Version: 2012-10-17
  ConstructHubWebAppDistributionOrigin1S3Origin694AF937:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: Identity for devConstructHubWebAppDistributionOrigin1FBBA04AE
  ConstructHubWebAppDistribution1F181DC9:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        DefaultCacheBehavior:
          CachePolicyId: 658327ea-f89d-4fab-a63d-7e88639e58f6
          Compress: true
          TargetOriginId: devConstructHubWebAppDistributionOrigin1FBBA04AE
          ViewerProtocolPolicy: allow-all
        DefaultRootObject: index.html
        Enabled: true
        HttpVersion: http2
        IPV6Enabled: true
        Origins:
          - DomainName:
              Fn::GetAtt:
                - ConstructHubWebAppWebsiteBucket4B2B9DB2
                - RegionalDomainName
            Id: devConstructHubWebAppDistributionOrigin1FBBA04AE
            S3OriginConfig:
              OriginAccessIdentity:
                Fn::Join:
                  - ""
                  - - origin-access-identity/cloudfront/
                    - Ref: ConstructHubWebAppDistributionOrigin1S3Origin694AF937
  ConstructHubWebAppDeployWebsiteAwsCliLayer23CFFBC1:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F
      Description: /opt/awscli/aws
  ConstructHubWebAppDeployWebsiteCustomResourceE6DF98C9:
    Type: Custom::CDKBucketDeployment
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536
          - Arn
      SourceBucketNames:
        - Ref: AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3Bucket11A0D65B
      SourceObjectKeys:
        - Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3VersionKey5E1C1FBA
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3VersionKey5E1C1FBA
      DestinationBucketName:
        Ref: ConstructHubWebAppWebsiteBucket4B2B9DB2
      Prune: true
      DistributionId:
        Ref: ConstructHubWebAppDistribution1F181DC9
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
  ConstructHubMonitoringWatchfulDashboardB8493D55:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardBody:
        Fn::Join:
          - ""
          - - '{"widgets":[{"type":"text","width":24,"height":2,"x":0,"y":0,"properties":{"markdown":"#
              dev/ConstructHub/Dummy/handler\\n\\n[button:AWS Lambda
              Console](https://console.aws.amazon.com/lambda/home?region='
            - Ref: AWS::Region
            - "#/functions/"
            - Ref: ConstructHubDummyhandlerC748A7D7
            - ?tab=graph) [button:CloudWatch
              Logs](https://console.aws.amazon.com/cloudwatch/home?region=
            - Ref: AWS::Region
            - "#logEventViewer:group=/aws/lambda/"
            - Ref: ConstructHubDummyhandlerC748A7D7
            - )"}},{"type":"metric","width":6,"height":6,"x":0,"y":2,"properties":{"view":"timeSeries","title":"Invocations/5min","region":"
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Invocations","FunctionName","'
            - Ref: ConstructHubDummyhandlerC748A7D7
            - '",{"stat":"Sum"}]],"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":6,"y":2,"properties":{"view":"timeSeries","title":"Errors/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Errors","FunctionName","'
            - Ref: ConstructHubDummyhandlerC748A7D7
            - '",{"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"Errors
              > 0 for 3 datapoints within 15
              minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":12,"y":2,"properties":{"view":"timeSeries","title":"Throttles/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Throttles","FunctionName","'
            - Ref: ConstructHubDummyhandlerC748A7D7
            - '",{"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"Throttles
              > 0 for 3 datapoints within 15
              minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":18,"y":2,"properties":{"view":"timeSeries","title":"Duration/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Duration","FunctionName","'
            - Ref: ConstructHubDummyhandlerC748A7D7
            - '",{"label":"p99","stat":"p99"}]],"annotations":{"horizontal":[{"label":"p99
              > 2000 for 3 datapoints within 15
              minutes","value":2000,"yAxis":"left"}]},"yAxis":{}}}]}'
      DashboardName: construct-hub
  ConstructHubMonitoringWatchfuldevConstructHubDummyhandler4B9E4732ErrorsAlarm776465ED:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: Over 0 errors per minute
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ConstructHubDummyhandlerC748A7D7
      MetricName: Errors
      Namespace: AWS/Lambda
      Period: 300
      Statistic: Sum
      Threshold: 0
  ConstructHubMonitoringWatchfuldevConstructHubDummyhandler4B9E4732ThrottlesAlarm95541894:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: Over 0 throttles per minute
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ConstructHubDummyhandlerC748A7D7
      MetricName: Throttles
      Namespace: AWS/Lambda
      Period: 300
      Statistic: Sum
      Threshold: 0
  ConstructHubMonitoringWatchfuldevConstructHubDummyhandler4B9E4732DurationAlarm28C95C66:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: p99 latency >= 2s (80%)
      Metrics:
        - Id: m1
          Label: p99
          MetricStat:
            Metric:
              Dimensions:
                - Name: FunctionName
                  Value:
                    Ref: ConstructHubDummyhandlerC748A7D7
              MetricName: Duration
              Namespace: AWS/Lambda
            Period: 300
            Stat: p99
          ReturnData: true
      Threshold: 2000
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
            Effect: Allow
            Resource:
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3Bucket11A0D65B
              - Fn::Join:
                  - ""
                  - - "arn:"
                    - Ref: AWS::Partition
                    - ":s3:::"
                    - Ref: AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3Bucket11A0D65B
                    - /*
          - Action:
              - s3:GetObject*
              - s3:GetBucket*
              - s3:List*
              - s3:DeleteObject*
              - s3:PutObject*
              - s3:Abort*
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - ConstructHubWebAppWebsiteBucket4B2B9DB2
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - ConstructHubWebAppWebsiteBucket4B2B9DB2
                        - Arn
                    - /*
          - Action:
              - cloudfront:GetInvalidation
              - cloudfront:CreateInvalidation
            Effect: Allow
            Resource: "*"
        Version: 2012-10-17
      PolicyName: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      Roles:
        - Ref: CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
  CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C81C01536:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3Bucket55EFA30C
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70
      Role:
        Fn::GetAtt:
          - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
          - Arn
      Handler: index.handler
      Layers:
        - Ref: ConstructHubWebAppDeployWebsiteAwsCliLayer23CFFBC1
      Runtime: python3.6
      Timeout: 900
    DependsOn:
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF
      - CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265
Outputs:
  ConstructHubWebAppDomainNAmeF5298649:
    Value:
      Fn::GetAtt:
        - ConstructHubWebAppDistribution1F181DC9
        - DomainName
    Export:
      Name: ConstructHubDomainName
  ConstructHubMonitoringWatchfulWatchfulDashboard75D318D0:
    Value:
      Fn::Join:
        - ""
        - - https://console.aws.amazon.com/cloudwatch/home?region=
          - Ref: AWS::Region
          - "#dashboards:name="
          - Ref: ConstructHubMonitoringWatchfulDashboardB8493D55
Parameters:
  AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aS3Bucket9AF898BC:
    Type: String
    Description: S3 bucket for asset
      "eef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0a"
  AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aS3VersionKeyFA101353:
    Type: String
    Description: S3 key for asset version
      "eef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0a"
  AssetParameterseef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0aArtifactHash0B73C9BA:
    Type: String
    Description: Artifact hash for asset
      "eef94609c25d6add403ad0beba1f67ca578ed753eda479d2869ec35736e35a0a"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3BucketAEADE8C7:
    Type: String
    Description: S3 bucket for asset
      "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68S3VersionKeyE415415F:
    Type: String
    Description: S3 key for asset version
      "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParameterse9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68ArtifactHashD9A515C3:
    Type: String
    Description: Artifact hash for asset
      "e9882ab123687399f934da0d45effe675ecc8ce13b40cb946f3e1d6141fe8d68"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3Bucket55EFA30C:
    Type: String
    Description: S3 bucket for asset
      "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfS3VersionKey60329B70:
    Type: String
    Description: S3 key for asset version
      "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParametersc24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cfArtifactHash85F58E48:
    Type: String
    Description: Artifact hash for asset
      "c24b999656e4fe6c609c31bae56a1cf4717a405619c3aa6ba1bc686b8c2c86cf"
  AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3Bucket11A0D65B:
    Type: String
    Description: S3 bucket for asset
      "8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410"
  AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410S3VersionKey5E1C1FBA:
    Type: String
    Description: S3 key for asset version
      "8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410"
  AssetParameters8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410ArtifactHash6E9B9D5B:
    Type: String
    Description: Artifact hash for asset
      "8452a12da113d3e02da3aaf4b7c8d6e9cb77bd3a62a09a4105a7a6160cd3f410"

`;
