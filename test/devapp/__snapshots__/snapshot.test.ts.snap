// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`golden snapshot 1`] = `
Resources:
  HostedZoneDB99F866:
    Type: AWS::Route53::HostedZone
    Properties:
      Name: hub.constructs.test.
  ConstructHubDummyNodejsFunctionServiceRoleB4158547:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
  ConstructHubDummyNodejsFunctionB2E12BA9:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccS3BucketD110318D
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccS3VersionKey951EC835
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccS3VersionKey951EC835
      Role:
        Fn::GetAtt:
          - ConstructHubDummyNodejsFunctionServiceRoleB4158547
          - Arn
      Environment:
        Variables:
          AWS_NODEJS_CONNECTION_REUSE_ENABLED: "1"
      Handler: index.handler
      Runtime: nodejs14.x
    DependsOn:
      - ConstructHubDummyNodejsFunctionServiceRoleB4158547
  ConstructHubMonitoringWatchfulDashboardB8493D55:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardBody:
        Fn::Join:
          - ""
          - - '{"widgets":[{"type":"text","width":24,"height":2,"x":0,"y":0,"properties":{"markdown":"#
              dev/ConstructHub/Dummy/NodejsFunction\\n\\n[button:AWS Lambda
              Console](https://console.aws.amazon.com/lambda/home?region='
            - Ref: AWS::Region
            - "#/functions/"
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - ?tab=graph) [button:CloudWatch
              Logs](https://console.aws.amazon.com/cloudwatch/home?region=
            - Ref: AWS::Region
            - "#logEventViewer:group=/aws/lambda/"
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - )"}},{"type":"metric","width":6,"height":6,"x":0,"y":2,"properties":{"view":"timeSeries","title":"Invocations/5min","region":"
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Invocations","FunctionName","'
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - '",{"stat":"Sum"}]],"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":6,"y":2,"properties":{"view":"timeSeries","title":"Errors/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Errors","FunctionName","'
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - '",{"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"Errors
              > 0 for 3 datapoints within 15
              minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":12,"y":2,"properties":{"view":"timeSeries","title":"Throttles/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Throttles","FunctionName","'
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - '",{"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"Throttles
              > 0 for 3 datapoints within 15
              minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":18,"y":2,"properties":{"view":"timeSeries","title":"Duration/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/Lambda","Duration","FunctionName","'
            - Ref: ConstructHubDummyNodejsFunctionB2E12BA9
            - '",{"label":"p99","stat":"p99"}]],"annotations":{"horizontal":[{"label":"p99
              > 2000 for 3 datapoints within 15
              minutes","value":2000,"yAxis":"left"}]},"yAxis":{}}}]}'
      DashboardName: construct-hub
  ConstructHubMonitoringWatchfuldevConstructHubDummyNodejsFunction2118A5FAErrorsAlarm919653A8:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: Over 0 errors per minute
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ConstructHubDummyNodejsFunctionB2E12BA9
      MetricName: Errors
      Namespace: AWS/Lambda
      Period: 300
      Statistic: Sum
      Threshold: 0
  ConstructHubMonitoringWatchfuldevConstructHubDummyNodejsFunction2118A5FAThrottlesAlarm78E3C2E6:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: Over 0 throttles per minute
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ConstructHubDummyNodejsFunctionB2E12BA9
      MetricName: Throttles
      Namespace: AWS/Lambda
      Period: 300
      Statistic: Sum
      Threshold: 0
  ConstructHubMonitoringWatchfuldevConstructHubDummyNodejsFunction2118A5FADurationAlarm520D63F1:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      AlarmDescription: p99 latency >= 2s (80%)
      Metrics:
        - Id: m1
          Label: p99
          MetricStat:
            Metric:
              Dimensions:
                - Name: FunctionName
                  Value:
                    Ref: ConstructHubDummyNodejsFunctionB2E12BA9
              MetricName: Duration
              Namespace: AWS/Lambda
            Period: 300
            Stat: p99
          ReturnData: true
      Threshold: 2000
Outputs:
  ConstructHubMonitoringWatchfulWatchfulDashboard75D318D0:
    Value:
      Fn::Join:
        - ""
        - - https://console.aws.amazon.com/cloudwatch/home?region=
          - Ref: AWS::Region
          - "#dashboards:name="
          - Ref: ConstructHubMonitoringWatchfulDashboardB8493D55
Parameters:
  AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccS3BucketD110318D:
    Type: String
    Description: S3 bucket for asset
      "2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4cc"
  AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccS3VersionKey951EC835:
    Type: String
    Description: S3 key for asset version
      "2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4cc"
  AssetParameters2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4ccArtifactHashAE312F43:
    Type: String
    Description: Artifact hash for asset
      "2d42ad25084c3958b33920bbec1a16d01763480bee1698260483b0f0d3c3e4cc"

`;
