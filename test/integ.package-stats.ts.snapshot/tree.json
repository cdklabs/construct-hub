{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"PackageStatsInteg":{"id":"PackageStatsInteg","path":"PackageStatsInteg","children":{"PackageData":{"id":"PackageData","path":"PackageStatsInteg/PackageData","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageData/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:195d28d8","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.189.0"}},"Policy":{"id":"Policy","path":"PackageStatsInteg/PackageData/Policy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageData/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PackageData6651D4CA"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.189.0","metadata":[{"bucket":"*"}]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"PackageStatsInteg/PackageData/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"PackageStatsInteg/PackageData/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.189.0","metadata":[{"autoDeleteObjects":true,"removalPolicy":"destroy","versioned":true}]}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"PackageStatsInteg/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.189.0"}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"PackageStatsInteg/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"PackageStatsInteg/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"Role":{"id":"Role","path":"PackageStatsInteg/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}},"Handler":{"id":"Handler","path":"PackageStatsInteg/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.189.0"}},"MockCatalog":{"id":"MockCatalog","path":"PackageStatsInteg/MockCatalog","children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"PackageStatsInteg/MockCatalog/AwsCliLayer","children":{"Code":{"id":"Code","path":"PackageStatsInteg/MockCatalog/AwsCliLayer/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/MockCatalog/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/MockCatalog/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"Resource":{"id":"Resource","path":"PackageStatsInteg/MockCatalog/AwsCliLayer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"d3adb8f8245549682ed42bc738adfed018ab3d9442ade840a7f42553830499d4.zip"},"description":"/opt/awscli/aws"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.189.0","metadata":[{}]}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"PackageStatsInteg/MockCatalog/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.189.0","metadata":[{"uuid":"*","layers":["*"],"environment":"*","lambdaPurpose":"*","timeout":"*","role":"*","memorySize":"*","ephemeralStorageSize":"*","vpc":"*","vpcSubnets":"*","filesystem":"*","logGroup":"*","code":"*","handler":"*","runtime":"*"},{"addMetadata":["*",true]},{"addMetadata":["*","*"]}]}},"Asset1":{"id":"Asset1","path":"PackageStatsInteg/MockCatalog/Asset1","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/MockCatalog/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/MockCatalog/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"CustomResource":{"id":"CustomResource","path":"PackageStatsInteg/MockCatalog/CustomResource","children":{"Default":{"id":"Default","path":"PackageStatsInteg/MockCatalog/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.189.0"}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","children":{"ServiceRole":{"id":"ServiceRole","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"/*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"}]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"Resource":{"id":"Resource","path":"PackageStatsInteg/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"4fe0aba5e672b596d0f72505a9eec502f98d46906bb30fae2511fbdc1df4956f.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"MockCatalogAwsCliLayerC68E9719"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.11","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.0","metadata":[{"layers":["*"],"environment":"*","timeout":"*","role":"*","memorySize":"*","ephemeralStorageSize":"*","vpc":"*","vpcSubnets":"*","filesystem":"*","logGroup":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":["*"]}]}},"Monitoring":{"id":"Monitoring","path":"PackageStatsInteg/Monitoring","children":{"Watchful":{"id":"Watchful","path":"PackageStatsInteg/Monitoring/Watchful","children":{"Dashboard":{"id":"Dashboard","path":"PackageStatsInteg/Monitoring/Watchful/Dashboard","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/Monitoring/Watchful/Dashboard/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":"{\"widgets\":[]}"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.189.0","metadata":[{"dashboardName":"*"}]}},"WatchfulDashboard":{"id":"WatchfulDashboard","path":"PackageStatsInteg/Monitoring/Watchful/WatchfulDashboard","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.0"}}},"constructInfo":{"fqn":"cdk-watchful.Watchful","version":"0.6.458"}},"HighSeverityDashboard":{"id":"HighSeverityDashboard","path":"PackageStatsInteg/Monitoring/HighSeverityDashboard","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/Monitoring/HighSeverityDashboard/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":"{\"widgets\":[]}"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.189.0","metadata":["*"]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"PackageStats":{"id":"PackageStats","path":"PackageStatsInteg/PackageStats","children":{"Chunker":{"id":"Chunker","path":"PackageStatsInteg/PackageStats/Chunker","children":{"ServiceRole":{"id":"ServiceRole","path":"PackageStatsInteg/PackageStats/Chunker/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PackageStatsInteg/PackageStats/Chunker/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Chunker/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/PackageStats/Chunker/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Chunker/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PackageStatsChunkerServiceRoleDefaultPolicy835C3D61","roles":[{"Ref":"PackageStatsChunkerServiceRole5CC90EAB"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"PackageStatsInteg/PackageStats/Chunker/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/PackageStats/Chunker/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/PackageStats/Chunker/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Chunker/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"22b7295ba9d29e7f40d72def8032bfe7304f13aee44226b51a4186f15a10a1ff.zip"},"description":"Splits package list into chunks for parallel processing","environment":{"variables":{"CATALOG_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"CATALOG_OBJECT_KEY":"catalog.json","STATS_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"STATS_OBJECT_KEY":"stats.json","CHUNK_SIZE":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PackageStatsChunkerServiceRole5CC90EAB","Arn"]},"runtime":"nodejs22.x","timeout":300,"tracingConfig":{"mode":"PassThrough"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.0"}},"LogRetention":{"id":"LogRetention","path":"PackageStatsInteg/PackageStats/Chunker/LogRetention","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Chunker/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.0"}},"LogGroup":{"id":"LogGroup","path":"PackageStatsInteg/PackageStats/Chunker/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.0","metadata":[{"description":"*","environment":"*","logRetention":1,"timeout":"*","tracing":"PassThrough","architecture":"*","runtime":"*","handler":"*","code":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]}},"Processor":{"id":"Processor","path":"PackageStatsInteg/PackageStats/Processor","children":{"ServiceRole":{"id":"ServiceRole","path":"PackageStatsInteg/PackageStats/Processor/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PackageStatsInteg/PackageStats/Processor/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Processor/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/PackageStats/Processor/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Processor/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PackageStatsProcessorServiceRoleDefaultPolicy3B128CED","roles":[{"Ref":"PackageStatsProcessorServiceRoleB4C3A776"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"PackageStatsInteg/PackageStats/Processor/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/PackageStats/Processor/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/PackageStats/Processor/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Processor/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"6237a29c2ca5966b4fa4a4d36455e32d66089456e3eb6f8ec187342fdf6199bf.zip"},"description":"Processes a chunk of packages to get NPM stats","environment":{"variables":{"CATALOG_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"CATALOG_OBJECT_KEY":"catalog.json","STATS_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"STATS_OBJECT_KEY":"stats.json","CHUNK_SIZE":"1"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["PackageStatsProcessorServiceRoleB4C3A776","Arn"]},"runtime":"nodejs22.x","timeout":600,"tracingConfig":{"mode":"PassThrough"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.0"}},"LogRetention":{"id":"LogRetention","path":"PackageStatsInteg/PackageStats/Processor/LogRetention","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Processor/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.0"}},"LogGroup":{"id":"LogGroup","path":"PackageStatsInteg/PackageStats/Processor/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.0","metadata":[{"description":"*","environment":"*","logRetention":1,"memorySize":"*","timeout":"*","tracing":"PassThrough","architecture":"*","runtime":"*","handler":"*","code":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]}},"Aggregator":{"id":"Aggregator","path":"PackageStatsInteg/PackageStats/Aggregator","children":{"ServiceRole":{"id":"ServiceRole","path":"PackageStatsInteg/PackageStats/Aggregator/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PackageStatsInteg/PackageStats/Aggregator/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Aggregator/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/PackageStats/Aggregator/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Aggregator/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageData6651D4CA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PackageStatsAggregatorServiceRoleDefaultPolicyF1BFA52F","roles":[{"Ref":"PackageStatsAggregatorServiceRole6C28D450"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"PackageStatsInteg/PackageStats/Aggregator/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/PackageStats/Aggregator/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/PackageStats/Aggregator/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Aggregator/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"d6c7857f80e2131db43f065cd5f0dfe11c19a89506fd7c50b32c33a142a4ef01.zip"},"description":"Aggregates processed chunks into final stats.json","environment":{"variables":{"CATALOG_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"CATALOG_OBJECT_KEY":"catalog.json","STATS_BUCKET_NAME":{"Ref":"PackageData6651D4CA"},"STATS_OBJECT_KEY":"stats.json","CHUNK_SIZE":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PackageStatsAggregatorServiceRole6C28D450","Arn"]},"runtime":"nodejs22.x","timeout":300,"tracingConfig":{"mode":"PassThrough"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.0"}},"LogRetention":{"id":"LogRetention","path":"PackageStatsInteg/PackageStats/Aggregator/LogRetention","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Aggregator/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.0"}},"LogGroup":{"id":"LogGroup","path":"PackageStatsInteg/PackageStats/Aggregator/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.0","metadata":[{"description":"*","environment":"*","logRetention":1,"timeout":"*","tracing":"PassThrough","architecture":"*","runtime":"*","handler":"*","code":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]}},"ChunkPackages":{"id":"ChunkPackages","path":"PackageStatsInteg/PackageStats/ChunkPackages","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.189.0"}},"ProcessChunksMap":{"id":"ProcessChunksMap","path":"PackageStatsInteg/PackageStats/ProcessChunksMap","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Map","version":"2.189.0"}},"ProcessChunk":{"id":"ProcessChunk","path":"PackageStatsInteg/PackageStats/ProcessChunk","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.189.0"}},"ProcessChunkError":{"id":"ProcessChunkError","path":"PackageStatsInteg/PackageStats/ProcessChunkError","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.189.0"}},"AggregateResults":{"id":"AggregateResults","path":"PackageStatsInteg/PackageStats/AggregateResults","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.189.0"}},"StateMachine":{"id":"StateMachine","path":"PackageStatsInteg/PackageStats/StateMachine","children":{"Role":{"id":"Role","path":"PackageStatsInteg/PackageStats/StateMachine/Role","children":{"ImportRole":{"id":"ImportRole","path":"PackageStatsInteg/PackageStats/StateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/StateMachine/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/PackageStats/StateMachine/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/StateMachine/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PackageStatsAggregatorAD9AE7A8","Arn"]},{"Fn::GetAtt":["PackageStatsChunker4B742AE1","Arn"]},{"Fn::GetAtt":["PackageStatsProcessor6DE92BAE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageStatsAggregatorAD9AE7A8","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageStatsChunker4B742AE1","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["PackageStatsProcessor6DE92BAE","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"PackageStatsStateMachineRoleDefaultPolicyF1A88399","roles":[{"Ref":"PackageStatsStateMachineRole7AD68AAC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/StateMachine/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ChunkPackages\",\"States\":{\"ChunkPackages\":{\"Next\":\"ProcessChunksMap\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.chunks\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PackageStatsChunker4B742AE1","Arn"]},"\",\"Payload.$\":\"$\"}},\"ProcessChunksMap\":{\"Type\":\"Map\",\"ResultPath\":\"$.processResults\",\"Next\":\"AggregateResults\",\"ItemsPath\":\"$.chunks.Payload.chunks\",\"ItemProcessor\":{\"ProcessorConfig\":{\"Mode\":\"INLINE\"},\"StartAt\":\"ProcessChunk\",\"States\":{\"ProcessChunk\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2},{\"ErrorEquals\":[\"States.ALL\"],\"IntervalSeconds\":300,\"MaxAttempts\":1,\"BackoffRate\":1}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"ProcessChunkError\"}],\"Type\":\"Task\",\"InputPath\":\"$\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PackageStatsProcessor6DE92BAE","Arn"]},"\",\"Payload.$\":\"$\"}},\"ProcessChunkError\":{\"Type\":\"Pass\",\"Result\":{\"error\":\"Failed to process chunk\"},\"End\":true}}},\"MaxConcurrency\":10},\"AggregateResults\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"InputPath\":\"$\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PackageStatsAggregatorAD9AE7A8","Arn"]},"\",\"Payload.$\":\"$\"}}},\"TimeoutSeconds\":21600}"]]},"roleArn":{"Fn::GetAtt":["PackageStatsStateMachineRole7AD68AAC","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.189.0"}},"EventsRole":{"id":"EventsRole","path":"PackageStatsInteg/PackageStats/StateMachine/EventsRole","children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"PackageStatsInteg/PackageStats/StateMachine/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/StateMachine/EventsRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/PackageStats/StateMachine/EventsRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/StateMachine/EventsRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"PackageStatsStateMachine28DD16FB"}}],"Version":"2012-10-17"},"policyName":"PackageStatsStateMachineEventsRoleDefaultPolicy80447AB9","roles":[{"Ref":"PackageStatsStateMachineEventsRoleE9044185"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.189.0","metadata":[{"definition":{"id":"*","startState":"*","endStates":"*"},"timeout":"*"},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]}]}},"Rule":{"id":"Rule","path":"PackageStatsInteg/PackageStats/Rule","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats/Rule/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"scheduleExpression":"rate(1 day)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"PackageStatsStateMachine28DD16FB"},"roleArn":{"Fn::GetAtt":["PackageStatsStateMachineEventsRoleE9044185","Arn"]}}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.189.0","metadata":[{"schedule":"*"},{"addEventPattern":["*"]},{"addTarget":[{}]}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","children":{"Code":{"id":"Code","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","children":{"Stage":{"id":"Stage","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"AssetBucket":{"id":"AssetBucket","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.0"}},"ServiceRole":{"id":"ServiceRole","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Resource":{"id":"Resource","path":"PackageStatsInteg/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"PackageStats--Failures":{"id":"PackageStats--Failures","path":"PackageStatsInteg/PackageStats--Failures","children":{"Resource":{"id":"Resource","path":"PackageStatsInteg/PackageStats--Failures/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"The package stats state machine failed!\n\nRunBook: https://github.com/cdklabs/construct-hub/blob/main/docs/operator-runbook.md","alarmName":"PackageStatsInteg/PackageStats/Failures","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"StateMachineArn","value":{"Ref":"PackageStatsStateMachine28DD16FB"}}],"evaluationPeriods":1,"metricName":"ExecutionsFailed","namespace":"AWS/States","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"missing"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.189.0","metadata":[{"metric":{"warnings":"*"},"alarmName":"*","alarmDescription":"*","comparisonOperator":"*","datapointsToAlarm":"*","threshold":"*","evaluationPeriods":"*","evaluateLowSampleCountPercentile":"*","treatMissingData":"missing","actionsEnabled":"*"}]}},"Exports":{"id":"Exports","path":"PackageStatsInteg/Exports","children":{"Output{\"Ref\":\"PackageStatsStateMachine28DD16FB\"}":{"id":"Output{\"Ref\":\"PackageStatsStateMachine28DD16FB\"}","path":"PackageStatsInteg/Exports/Output{\"Ref\":\"PackageStatsStateMachine28DD16FB\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PackageStatsInteg/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.189.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PackageStatsInteg/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.189.0"}},"package-stats-integ":{"id":"package-stats-integ","path":"package-stats-integ","children":{"DefaultTest":{"id":"DefaultTest","path":"package-stats-integ/DefaultTest","children":{"Default":{"id":"Default","path":"package-stats-integ/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"DeployAssert":{"id":"DeployAssert","path":"package-stats-integ/DefaultTest/DeployAssert","children":{"AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147":{"id":"AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147","children":{"SdkProvider":{"id":"SdkProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147/SdkProvider","children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.189.0-alpha.0"}},"Default":{"id":"Default","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147/Default","children":{"Default":{"id":"Default","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsstartExecution277c70f2c81676b3266243c8843c2147/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.0","metadata":["*","*","*"]}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"2.189.0-alpha.0"}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","children":{"Staging":{"id":"Staging","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"Role":{"id":"Role","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}},"Handler":{"id":"Handler","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"package-stats-integ/DefaultTest/DeployAssert/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.189.0"}},"AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a":{"id":"AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a","children":{"SdkProvider":{"id":"SdkProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/SdkProvider","children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.189.0-alpha.0"}},"Default":{"id":"Default","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/Default","children":{"Default":{"id":"Default","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.0","metadata":["*","*","*"]}},"WaitFor":{"id":"WaitFor","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor","children":{"IsCompleteProvider":{"id":"IsCompleteProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/IsCompleteProvider","children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/IsCompleteProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"Invoke":{"id":"Invoke","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/IsCompleteProvider/Invoke","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.189.0-alpha.0"}},"TimeoutProvider":{"id":"TimeoutProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/TimeoutProvider","children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/TimeoutProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"Invoke":{"id":"Invoke","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/TimeoutProvider/Invoke","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.189.0-alpha.0"}},"Role":{"id":"Role","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}},"Resource":{"id":"Resource","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/WaitFor/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.WaiterStateMachine","version":"2.189.0-alpha.0"}},"AssertionResults":{"id":"AssertionResults","path":"package-stats-integ/DefaultTest/DeployAssert/AwsApiCallStepFunctionsdescribeExecution177dcec8e66700ed31d2dae5ff0ca55a/AssertionResults","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"2.189.0-alpha.0"}},"SingletonFunction76b3e830a873425f8453eddd85c86925":{"id":"SingletonFunction76b3e830a873425f8453eddd85c86925","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925","children":{"Staging":{"id":"Staging","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"Role":{"id":"Role","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}},"Handler":{"id":"Handler","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a":{"id":"SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a","children":{"Staging":{"id":"Staging","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.0"}},"Role":{"id":"Role","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}},"Handler":{"id":"Handler","path":"package-stats-integ/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"package-stats-integ/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.189.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"package-stats-integ/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.189.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.189.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"2.189.0-alpha.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"2.189.0-alpha.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.189.0"}}}